<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    
    
    <title>Login to Krusty</title>
    
    
    <script src="assets/js/jquery.min.js"></script> 
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script defer src="assets/js/upload.js"></script>
    <script src="assets/package/dist/Chart.min.js"></script>
    
    <script>
         $(document).ready(function(){
            $('#navguest').load("nav/nav-user.html");
            $('#footer').load("footer/footer-user.html");
            $('#favicon').load("favicon.html");
         });
    </script>
   
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oleo+Script">
    <link rel="stylesheet" href="assets/css/Footer-Basic.css">
    <link rel="stylesheet" href="assets/css/Navigation-with-Button.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css//uploadstyle.css"> 
    


    <div id = "favicon" > </div>
</head>

<body>
    <div id = "navguest"> </div>
    <center>
        <form class="uploadArea">
            <h1>Select a File to Upload</h1> <br>
            <input type="file" id="selectFiles" value = "Import" accept=".json"> <br> <br>
            <input type="button" id="import" value="Upload">
            <input type="button" id="cancelUpload" value="Cancel">
        </form>

        <div class = "container">

            <canvas id=  "summary"> </canvas>
    
        </div>


    </center>

       
        <script> 
            document.getElementById('import').onclick = function() {
                var files = document.getElementById('selectFiles').files;
                console.log(files);
                if (files.length <= 0) {
                    return false;
                }

                var fr = new FileReader();

                

                fr.onload = function(e) {
                    console.log(e);
                    var result = JSON.parse(e.target.result);
                    var formatted = JSON.stringify(result, null, 2);

                    console.log(result);

                    var allNames = result.sales;

                    console.log(allNames);

                    var burgersales = result["burger_sales"];
                    var burgersalesQty = [burgersales["Krusty Combo"], burgersales["Krusty Deluxe"], burgersales["Krabby Pattie"]];
                    console.log(burgersalesQty);

                    let myChart = document.getElementById('summary').getContext('2d');

                    let barChart = new Chart(myChart, {
                        type:'bar',
                        data: {
                            labels: ['Krusty Combo', 'Krusty Deluxe', 'Krabby Pattie'],
                            datasets: [{
                            label: 'Burger Sales',
                            data: burgersalesQty
                            }]
                        },
                    options: {}
    
                    });

                };


                fr.readAsText(files.item(0));

                
                

            };

        
        </script>

    
    <div id = "footer"> </div>

</body>

</html>